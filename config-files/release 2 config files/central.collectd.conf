Interval 30 #variable
Hostname 45.55.197.112 #variable

LoadPlugin "memory"
LoadPlugin "df"
LoadPlugin "cpu"
LoadPlugin "interface"

<Plugin “cpu”>
	ReportByState true 
	ReportByCpu true 
	ValuesPercentage true 
</Plugin>

<Plugin “memory”>
	ValuesAbsolute true 
	ValuesPercentage false 
</Plugin>

<Plugin "df"> 
	Device "/dev/hda1" 
	MountPoint "/home" 
	FSType "ext3" 
	IgnoreSelected false 
	ReportInodes false 
	ReportReserved false 
</Plugin>

<Plugin “interface”>
	Interface "lo" 
	Interface "sit0" 
	IgnoreSelected true 
</Plugin>

LoadPlugin "logfile" 
<Plugin "logfile">
  LogLevel "info" 
  File "/home/owls/collectd/log/collectd.log" 
  Timestamp true 
  PrintSeverity true 
</Plugin>

LoadPlugin "csv"
<Plugin "csv">
  DataDir "/home/owls/collectd/csv" 
  StoreRates true 
</Plugin>

LoadPlugin "network"
<Plugin "network">
  Listen "45.55.197.112" 
</Plugin>

LoadPlugin "write_graphite"
<Plugin "write_graphite">
    <Node "graphing">
        Host "localhost" 
        Port "2003" 
        Protocol "tcp"  
        LogSendErrors true 
        Prefix "collectd." 
        StoreRates true 
        AlwaysAppendDS false 
        EscapeCharacter "_" 
    </Node>
</Plugin>

#Aggregation general setting
LoadPlugin aggregation
<LoadPlugin aggregation>
    Interval 30 #variable
</LoadPlugin>

#Aggregation mongo
<Plugin "aggregation">

	<Aggregation>
		Plugin "mongo"
		Type "memory" 
		TypeInstance "/.*/"
		GroupBy "TypeInstance"

		CalculateNum true #variable
		CalculateSum true #variable
		CalculateAverage true #variable
		CalculateMinimum true #variable
		CalculateMaximum true #variable
		CalculateStddev true #variable
	</Aggregation>

	<Aggregation>
		Host "localhost" #variable
		Plugin "cpu" 
		PluginInstance "/[0]$/" 
		Type "cpu" 
		TypeInstance "cpu-system" 

		GroupBy "TypeInstance"

		CalculateNum true #variable
		CalculateSum true #variable
		CalculateAverage true #variable
		CalculateMinimum true #variable
		CalculateMaximum true #variable
		CalculateStddev true #variable
	</Aggregation>
#aggregation cassandra

<Aggregation>
	Host "/128.+|45.+/"
	Plugin "GenericJMX"
	Type "memory"
	TypeInstance "/^heap-mem.*/"
	GroupBy "TypeInstance"

	# Sets the name of the output folder
	SetHost “global”
	SetPlugin "aggregation"      	# first part of the name
	SetPluginInstance "heap-mem-%{aggregation}" # second part of the name

	CalculateNum true #variable
	CalculateSum true #variable
	CalculateAverage false #variable
	CalculateMinimum false #variable
	CalculateMaximum false #variable
	CalculateStddev false #variable
</Aggregation>
	
	<Aggregation>
		Host "localhost" #variable (if localhost works make this static)
		Plugin "memory" 
		PluginInstance "/[0]$/" 
		Type "memory"

		GroupBy "TypeInstance"

		CalculateNum true #variable
		CalculateSum true #variable
		CalculateAverage true #variable
		CalculateMinimum true #variable
		CalculateMaximum true #variable
		CalculateStddev true #variable
	</Aggregation>
	
	#we need redis aggregation here
	
	#postgres aggregation
	<Aggregation>
		Plugin "postgresql"				
		Type "pg_scan"			

		CalculateNum true #variable
		CalculateSum true #variable
		CalculateAverage true #variable
		CalculateMinimum true #variable
		CalculateMaximum true #variable
		CalculateStddev true #variable
	</Aggregation>
	


</Plugin>

#Aggregation ends
#Missing Deamon
<Plugin "MissingDaemon">
    # Number of times a heartbeat has to miss before declaring dead.
    # This is a multiple of ‘Interval’
    Threshold 4 #variable
    # This is the interval of the email in MINUTES. This is the measure of how often the email will be sent.
    EmailInterval 30 #variable
    <Email "MissingDaemon">
	recpt1 “emial1@abc.com” #variable
	recpt2 “emial2@abc.com” #variable
	recpt3 “emial3@abc.com” #variable
    </Email>
</Plugin>

#The plugin that reacts to all notifications coming from remote nodes
#and the central server itself.
LoadPlugin "java"
<Plugin "java">
    JVMARG "-Djava.class.path=/home/owls/collectd-5.5.0/bindings/java/.libs/collectd-api.jar:/home/owls/collectd-5.5.0/bindings/java/.libs/generic-jmx.jar:/home/owls/collectd/thresholdnotification.jar" #variable
   LoadPlugin "com.observability.monitoring.server.ThresholdNotificationPlugin"
  	<Plugin "ThresholdNotificationPlugin">
	recpt1 “emial1@abc.com” #variable
	recpt2 “emial2@abc.com” #variable
	recpt3 “emial3@abc.com” #variable
	httpip 10.10.101.1 #variable
	httpport 8080 #variable
	</Plugin>
</Plugin>

#the plugin that sends notifications about the central server
LoadPlugin "threshold"
<Plugin "threshold">
  <Host "45.55.197.112">#variable
    <Type "cpu"> #variable
     WarningMin    0.2 #variable
     WarningMax    0.8 #variable
     FailureMin    0.1 #variable
     FailureMax    0.9 #variable
     Invert false #variable
     Instance "system" #variable
    </Type>
   </Host>
 </Plugin>




